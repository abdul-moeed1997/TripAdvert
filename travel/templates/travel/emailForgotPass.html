{% extends  'base.html'  %}
{% load static %}


{% block title %}
<title>Forgot Password</title>
{% endblock %}

<!-- Mirrored from rn53themes.net/themes/demo/travelz/login.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 30 Nov 2019 09:57:01 GMT -->
{% block body  %}
    <section>
        <div class="search-top">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="search-form">
						 <form class="tourz-search-form" action="/travel/tours/" method="post" style="margin-left: 16%">
                            {% csrf_token %}

                            <div class="input-field">
                                <input type="text" id="select-search" name="common_filter" class="autocomplete">
                                <label for="select-search" class="search-hotel-type">Search over a million tour and travels, sight seeings, hotels and more</label>
                            </div>
                            <div class="input-field">
                                <input type="submit" value="search" class="waves-effect waves-light tourz-sear-btn"> </div>
                        </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
		<!-- END TOP SEARCH BOX -->
    </section>
	<!--DASHBOARD-->
	<section>

			<div class="tr-regi-form " >
				<h4 class="text-primary " >Reset  password</h4>
                <p>Verify Email</p>
				<form class="col s12" method="post" onsubmit="return validateEmail()">
				{% csrf_token %}
					<div class="row">
						<div class="input-field col s12">
							<input type="email" id="email" name="email" class="validate" required>
							<label>Enter your Email</label>
						</div>
					</div>
					<div class="row">
						<div class="input-field col s12">
                            <p class="ml-0 text-danger" id="error" style="font-size: 12px;"></p>
						</div>
					</div>
					<div class="row">
						<div class="input-field col s12">
							<input type="submit" value="Submit" class=" btn-large full-btn"> </div>
					</div>
				</form>


			</div>

	</section>
	<!--END DASHBOARD-->
    <script>
        function validateEmail() {
            flag = false;
            email = document.getElementById("email").value;
            url =  "/api/persons/?email="+email;
            $.ajax({
                 url: url,
                 dataType: 'json',
                 async: false,
                 success: function (data) {
                     if (data.length > 0) {
                        flag = true
                     }
                     else {
                         document.getElementById("error").innerText = "Email is not registered!";
                     }
                 },
                 error: function() {
                         document.getElementById("error").innerText = "Something went wrong";
                 }
             });
            return flag;
        }
    </script>

{% endblock %}
